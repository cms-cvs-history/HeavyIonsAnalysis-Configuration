process SIM = {

untracked PSet maxEvents = {
   untracked int32 input = 1
}

#_________________________________________________   
service = MessageLogger {
    untracked vstring destinations =  { "cout" }        # send messages to cout
    untracked vstring debugModules =  { "HydjetSource" }# messages comming form HydjetInterface (replace with "*" for all modules, or, add new ones separated by comma)
   
    untracked PSet cout =
      {
        untracked string threshold = "INFO"     # the lower severity limit of the printed messages (default is 'INFO')
        untracked PSet default     = { untracked int32 limit =  -1 }   # kill all messages in the log
        untracked PSet WARNING      = { untracked int32 limit = -1 }   # print all debug messages
        untracked PSet INFO        = { untracked int32 limit = -1 }   # print all info messages
      }
}

   service = RandomNumberGeneratorService
   {
      untracked uint32 sourceSeed = 1
      PSet moduleSeeds =
      {
         untracked uint32 VtxSmeared = 2
         untracked uint32 g4SimHits  = 3
         untracked uint32 mix        = 4
         untracked uint32 siPixelDigis = 5
         untracked uint32 siStripDigis = 6
         untracked uint32 ecalUnsuppressedDigis = 7
         untracked uint32 hcalUnsuppressedDigis = 8
         untracked uint32 hcalDigis = 9
         untracked uint32 muonCSCDigis = 10
         untracked uint32 muonDTDigis = 11
         untracked uint32 muonRPCDigis = 12
      }
   }

  include "Configuration/StandardSequences/data/FakeConditions.cff"
  untracked PSet options =
  {
    include "FWCore/Framework/test/cmsExceptionsFatalOption.cff"
    untracked bool wantSummary = true
    untracked bool makeTriggerResults = true
  }
 
#__________________________________________________
# physics event generation
#

source = HydjetSource {
    # initialize pythia
    PSet PythiaParameters = {
        # This is a vector of ParameterSet names to be read, in this order
        # They are  in the include files
        # pythiaDefault HAS TO BE ALWAYS included
        # If just the hard QCD dijets wanted, comment out the photons corresponding include and parameter set
        vstring parameterSets = {
                "pythiaDefault"        # MSEL=1 (hard QCD dijets in) + hydjet needed initializations
                }
        include "GeneratorInterface/PyquenInterface/data/pyquenPythiaDefault.cfi"
    }  

    # default hydjet parameters
    include "GeneratorInterface/HydjetInterface/data/hydjetSourceDefault.cfi"
}

# whatever parameters from the hydjetSourceDefault you want to modify, do it following the exampels
replace HydjetSource.bFixed        = 0.               # fixed impact param (fm); valid only if cflag_=0
replace HydjetSource.bMax          = 0.               # max impact param (fm)
replace HydjetSource.bMin          = 0.               # min impact param (fm)
replace HydjetSource.cFlag         = 0                # centrality flag
                                                      # =  0 fixed impact param
                                                      # <> 0 between bmin and bmax
replace HydjetSource.hydjetMode    = "kHydroQJets"    #Hydjet running mode.

replace HydjetSource.nMultiplicity = 26000  #mean soft multiplicity in central PbPb
                                            #automatically calculated for other centralities and beams

# Valid entries:
# kHydroOnly  //jet production off (pure HYDRO event): nhsel=0
# kHydroJets  //jet production on, jet quenching off (HYDRO+njet*PYTHIA events):nhsel=1
# kHydroQJets //jet production & jet quenching on (HYDRO+njet*PYQUEN events);nhsel=2
# kJetsOnly   //jet production on, jet quenching off, HYDRO off (njet*PYTHIA events):nhsel=3
# kQJetsOnly  //jet production & jet quenching on, HYDRO off (njet*PYQUEN events):nhsel=4

  include "Configuration/StandardSequences/data/Generator.cff"
  include "Configuration/StandardSequences/data/Reconstruction.cff"
  include "Configuration/StandardSequences/data/Simulation.cff"
  include "Configuration/StandardSequences/data/MixingNoPileUp.cff"
  include "Configuration/StandardSequences/data/VtxSmearedGauss.cff"
  include "Configuration/StandardSequences/data/L1Emulator.cff"
#___________________________________________________ 

  sequence pgen0 = { VertexSmearing & GeneInfo }
  path p0 = {pgen0} # generator information
  path p1 = {psim} # simulation
#  path p2 = {pdigi} # digitization
#  path p3 = {localreco}
#  path p3 = {reconstruction_plusRS} # reconstruction
#  path p4 = {L1Emulator}
  
  include "Configuration/EventContent/data/EventContent.cff"
 
  module FEVT = PoolOutputModule
  {
    using FEVTSIMEventContent
    untracked string fileName = "__BASE__.root"
    untracked PSet dataset =
    {  
      untracked string dataTier = "GEN-SIM"
    }
  }
  
  endpath outpath = {FEVT}
   
}
