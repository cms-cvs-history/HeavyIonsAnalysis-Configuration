process RECO =
{
   untracked PSet maxEvents =
   {
      untracked int32 input = 1
   }

   source = PoolSource
   {
     untracked vstring fileNames =
      {
#                "rfio:/castor/cern.ch/cms/store/cmshi/mc/sim/pgun_jpsi2muons_d20080423/pgun_jpsi2muons_d20080423_r000001.root"
           "rfio:/castor/cern.ch/cms/store/cmshi/mc/sim/hydjet_sim_x2_c1_d20080425/hydjet_sim_x2_c1_d20080425_r000002.root"


      }
   }

#
#  For running on signal only, comment out the whole Mixing Module and
#  uncomment the line below:
#
  include "Configuration/StandardSequences/data/MixingNoPileUp.cff"

#include "HeavyIonsAnalysis/Configuration/data/EventEmbedding.cff"
#   module mix = MixingModule
#   {
#      secsource input = PoolRASource
#      {
#         untracked vstring fileNames =
#         {
#                "rfio:/castor/cern.ch/cms/store/cmshi/mc/sim/hydjet_sim_x2_c10_d20080425/hydjet_sim_x2_c10_d20080425_r000002.root"
#         }
# 	using eventEmbeddingSourceParameters
#      }
#	using simEventEmbeddingMixParameters
#   }

#
#  Do not forget to change seed for productions mode
#    
   service = RandomNumberGeneratorService
   {
      untracked uint32 sourceSeed                = 1
      PSet moduleSeeds =
      {
         untracked uint32 VtxSmeared             = 2
         untracked uint32 g4SimHits              = 3
         untracked uint32 mix                    = 4
         untracked uint32 simMuonCSCDigis           = 6
         untracked uint32 simMuonDTDigis            = 6
         untracked uint32 simMuonRPCDigis           = 6
         untracked uint32 simSiPixelDigis           = 7
         untracked uint32 simSiStripDigis           = 7
         untracked uint32 simEcalUnsuppressedDigis  = 8
         untracked uint32 simHcalUnsuppressedDigis  = 9
      }
   }

service = SimpleMemoryCheck {
      untracked int32 ignoreTotal = 0 # default is one
      untracked bool oncePerEventMode = false
}

   service = MessageLogger
   {
    untracked vstring debugModules =  { "towerMaker" , "caloTowers", "iterativeConePu5CaloJets" }

      untracked vstring destinations =  { "cout", "cerr" }
      untracked vstring fwkJobReports = { "FrameworkJobReport.xml" }
      untracked PSet cerr             = { untracked string threshold = "DEBUG" }
      untracked PSet cout             = { untracked string threshold = "DEBUG" }
   }

   service = Timing {}

   include "Configuration/StandardSequences/data/MagneticField.cff"
   include "Configuration/StandardSequences/data/Geometry.cff"
   include "Configuration/StandardSequences/data/Digi.cff"
   include "Configuration/StandardSequences/data/L1Emulator.cff"
   include "Configuration/StandardSequences/data/L1TriggerDefaultMenu.cff"
   include "Configuration/StandardSequences/data/DigiToRaw.cff"
   include "Configuration/StandardSequences/data/RawToDigi.cff"

   include "SimGeneral/HepPDTESSource/data/pythiapdt.cfi"

   # Fake running conditions
   include "Configuration/StandardSequences/data/FakeConditions.cff"

    include "Geometry/RPCGeometry/data/rpcGeometry.cfi" 
    include "Geometry/CSCGeometry/data/cscGeometry.cfi"

    include "SimMuon/RPCDigitizer/data/muonrpcdigi.cfi"

##################################################################################

    include "HeavyIonsAnalysis/Configuration/data/Reconstruction_PbPb.cff"

##################################################################################

    # path
   path p = { mix, doAllDigi, 

              L1Emulator, DigiToRaw, RawToDigi,

	      reconstruct_PbPb

            }

   include "HeavyIonsAnalysis/Configuration/data/HIAnalysisEventContent.cff"

   module output = PoolOutputModule
   {
      untracked string fileName = "jpsi2muons_PbPb_RECO.root"
      untracked int32 compressionLevel = 2
      untracked uint32 commitInterval = 1

      using HIRecoObjects
   }

   replace output.outputCommands += "keep *_*_*_RECO"

   endpath outpath = { output }
}
