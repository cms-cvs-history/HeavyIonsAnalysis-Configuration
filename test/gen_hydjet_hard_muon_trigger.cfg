process GEN = {

untracked PSet maxEvents = {
   untracked int32 input = 100
}

#_________________________________________________
service = MessageLogger {
    untracked vstring destinations =  { "cout" }        # send messages to cout
    untracked vstring debugModules =  { "HydjetSource" }# messages comming form HydjetInterface (replace with "*" for all modules, or, add new ones separated by comma)

    untracked PSet cout =
      {
        untracked string threshold = "INFO"     # the lower severity limit of the printed messages (default is 'INFO')
        untracked PSet default     = { untracked int32 limit =  -1 }   # kill all messages in the log
        untracked PSet WARNING      = { untracked int32 limit = -1 }   # print all debug messages
        untracked PSet INFO        = { untracked int32 limit = -1 }   # print all info messages
      }
}

  service = SimpleMemoryCheck {
     untracked int32 ignoreTotal = 0 # default is one
  }

   service = RandomNumberGeneratorService
   {
      untracked uint32 sourceSeed = 17974
   }

#__________________________________________________
# physics event generation
#
# Modify parameters after the scope of "source", by using "replace"
#

include "GeneratorInterface/PyquenInterface/data/pyquenPythiaDefault.cfi"

source = HydjetSource { 

    untracked int32 pythiaPylistVerbosity = 0
    untracked int32 maxEventsToPrint      = 0 # events to print if pythiaPylistVerbosit

   PSet PythiaParameters = {
        # This is a vector of ParameterSet names to be read, in this order
        # They are  in the include files
        # pythiaDefault HAS TO BE ALWAYS included
        # If just the hard QCD dijets wanted, comment out the photons corresponding include and parameter set
        vstring parameterSets = {
                "pythiaMuons"        # CKIN(3) = 20 GeV MSEL=1 (hard QCD dijets in)
        }

        using pyquenPythiaDefaultBlock
    }

    double aBeamTarget               = 207.  # beam/target atomic number
    double bFixed                    = 0.    # fixed impact param (fm);
    double bMax                      = 0.    # max impact param (fm);
    double bMin                      = 0.    # min impact param (fm);
    int32  cFlag                     = 0     # centrality flag
    double comEnergy                 = 5500. # collision energy
    bool doRadiativeEnLoss           = true  # if true, perform partonic radiative en loss
    bool doCollisionalEnLoss         = true  # if true, perform partonic collisional en loss
    double fracSoftMultiplicity      = 1.    # fraction of soft hydro induced hadronic multiplicity
    double hadronFreezoutTemperature = 0.14  # hadron freez-out temperature
    string hydjetMode                = "kHydroQJets"    # Hydjet running mode.
    double maxLongitudinalRapidity   = 4.     # max longitudinal collective rapidity:
    double maxTransverseRapidity     = 1.5    # max transverse collective rapidity:
    int32  nMultiplicity             = 26000  # mean soft multiplicity in central PbPb
    int32  qgpNumQuarkFlavor         = 0      # number of active quark flavors in qgp;
    double qgpInitialTemperature     = 1.     # initial temperature of QGP
    double qgpProperTimeFormation    = 0.1    # proper time of QGP formation;
    double sigmaInelNN               = 58     # inelastic nucleon-nucleon cross section (mb)
    int32 shadowingSwitch            = 1      # nuclear shadowing 1=ON, 0=OFF
}

# whatever parameters from the hydjetSourceDefault you want to modify, do it following the exampels
replace HydjetSource.bMax          = 7.21126         # max impact param (fm)  #  Corresponding to
replace HydjetSource.bMin          = 0               # min impact param (fm)  #  20% most
replace HydjetSource.cFlag         = 20              # centrality flag        #  Central
                                                      # =  0 fixed impact param
                                                      # <> 0 between bmin and bmax
replace HydjetSource.hydjetMode    = "kQJetsOnly"

# Valid entries:
# kHydroOnly  //jet production off (pure HYDRO event): nhsel=0
# kHydroJets  //jet production on, jet quenching off (HYDRO+njet*PYTHIA events):nhsel=1
# kHydroQJets //jet production & jet quenching on (HYDRO+njet*PYQUEN events);nhsel=2
# kJetsOnly   //jet production on, jet quenching off, HYDRO off (njet*PYTHIA events):nhsel=3
# kQJetsOnly  //jet production & jet quenching on, HYDRO off (njet*PYQUEN events):nhsel=4


#
# Please build the GenTrigger by
# cd $CMSSW_BASE/src
# cvs co UserCode/yetkin/HIProdAlgos/GenTrigger
# mv UserCode/yetkin/HIProdAlgos/ ./
# scramv1 b
#
# otherwise comment everything out, regard the output module
#


module gentrig = GenTrigger {

vint32 trigIDs = { 13 }
untracked double ptMin = 20
untracked double etaMin = -2.4
untracked double etaMax = 2.4
untracked bool printResults = true

}

path trig = {gentrig}

  module out = PoolOutputModule
  {
    untracked PSet SelectEvents = {
      vstring SelectEvents = { "trig" }
    }
    untracked string fileName = "hydjet_muontrig_gen_x4_c20_d20080529.root"
  }

  endpath outpath = {out}

}


